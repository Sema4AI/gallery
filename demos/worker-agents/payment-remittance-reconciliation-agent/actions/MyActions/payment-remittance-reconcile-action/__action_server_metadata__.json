{"metadata": {"name": "payment-remittance-reconcile-action", "description": "Performs reconciliation of remittance documents by analyzing, storing, and updating payment data. Identifies discrepancies and updates work item status based on reconciliation results.", "secrets": {}, "action_package_version": "0.0.4", "metadata_version": 2}, "openapi.json": {"openapi": "3.1.0", "info": {"title": "Sema4.ai Action Server", "version": "1.1.2"}, "servers": [{"url": "http://localhost:8080"}], "paths": {"/api/actions/payment-remittance-reconcile-action/get-remittance-work-item-for-reconciliation/run": {"post": {"summary": "Get Remittance Work Item For Reconciliation", "description": "This method retrieves the remittance work item using the provided remittance ID to start the reconciliation process.", "operationId": "get_remittance_work_item_for_reconciliation", "requestBody": {"content": {"application/json": {"schema": {"properties": {"remittance_id": {"type": "string", "title": "Remittance Id", "description": "ID of the remittance"}}, "type": "object", "required": ["remittance_id"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"status": {"allOf": [{"type": "string", "enum": ["success", "failure", "partial_success"], "title": "ActionStatus"}], "description": "The overall status of the action"}, "message": {"type": "string", "title": "Message", "description": "A brief summary or instruction for the agent"}, "agent_insight_context": {"anyOf": [{"properties": {"document_id": {"type": "string", "title": "Document Id"}, "document_name": {"type": "string", "title": "Document Name"}, "customer_id": {"type": "string", "title": "Customer Id"}, "payment_data_loading": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "payment_matching": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "facility_type_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "invoice_level_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "overall_status": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Overall Status"}, "overall_processing_time": {"type": "number", "title": "Overall Processing Time", "default": 0.0}}, "type": "object", "required": ["document_id", "document_name", "customer_id"], "title": "ReconciliationAgentInsightContext"}, {"type": "null"}]}, "additional_data": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Additional Data", "description": "Any additional data that might be relevant"}}, "type": "object", "required": ["status", "message"], "title": "Response for Get Remittance Work Item For Reconciliation", "description": "Response object containing the status, message, and additional data if any."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/actions/payment-remittance-reconcile-action/store-and-analyze-payment/run": {"post": {"summary": "Store And Analyze Payment", "description": "Combined action to store payment data and perform reconciliation analysis atomically.", "operationId": "store_and_analyze_payment", "requestBody": {"content": {"application/json": {"schema": {"properties": {"remittance_id": {"type": "string", "title": "Remittance Id", "description": "ID of the remittance"}, "threshold": {"type": "number", "title": "Threshold", "description": "Acceptable difference threshold", "default": 0.01}}, "type": "object", "required": ["remittance_id"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"status": {"allOf": [{"type": "string", "enum": ["success", "failure", "partial_success"], "title": "ActionStatus"}], "description": "The overall status of the action"}, "message": {"type": "string", "title": "Message", "description": "A brief summary or instruction for the agent"}, "agent_insight_context": {"anyOf": [{"properties": {"document_id": {"type": "string", "title": "Document Id"}, "document_name": {"type": "string", "title": "Document Name"}, "customer_id": {"type": "string", "title": "Customer Id"}, "payment_data_loading": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "payment_matching": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "facility_type_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "invoice_level_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "overall_status": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Overall Status"}, "overall_processing_time": {"type": "number", "title": "Overall Processing Time", "default": 0.0}}, "type": "object", "required": ["document_id", "document_name", "customer_id"], "title": "ReconciliationAgentInsightContext"}, {"type": "null"}]}, "additional_data": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Additional Data", "description": "Any additional data that might be relevant"}}, "type": "object", "required": ["status", "message"], "title": "Response for Store And Analyze Payment", "description": "Response object containing status, message, and reconciliation results"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/actions/payment-remittance-reconcile-action/update-work-item-status/run": {"post": {"summary": "Update Work Item Status", "description": "Update work item status based on reconciliation results.", "operationId": "update_work_item_status", "requestBody": {"content": {"application/json": {"schema": {"properties": {"remittance_id": {"type": "string", "title": "Remittance Id", "description": "ID of the remittance"}, "status_summary": {"type": "string", "title": "Status Summary", "description": "Brief summary of reconciliation outcome"}, "detailed_report": {"type": "string", "title": "Detailed Report", "description": "Comprehensive reconciliation report"}, "is_reconciled": {"type": "boolean", "title": "Is Reconciled", "description": "Whether the reconciliation was successful"}}, "type": "object", "required": ["remittance_id", "status_summary", "detailed_report", "is_reconciled"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"status": {"allOf": [{"type": "string", "enum": ["success", "failure", "partial_success"], "title": "ActionStatus"}], "description": "The overall status of the action"}, "message": {"type": "string", "title": "Message", "description": "A brief summary or instruction for the agent"}, "agent_insight_context": {"anyOf": [{"properties": {"document_id": {"type": "string", "title": "Document Id"}, "document_name": {"type": "string", "title": "Document Name"}, "customer_id": {"type": "string", "title": "Customer Id"}, "payment_data_loading": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "payment_matching": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "facility_type_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "invoice_level_reconciliation": {"anyOf": [{"properties": {"phase": {"type": "string", "enum": ["Payment Data Loading", "Payment Matching", "Facility Type Reconciliation", "Invoice Level Reconciliation", "PAYMENT_RECONCILIATION"], "title": "ReconciliationPhase"}, "start_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Time"}, "end_time": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Time"}, "events": {"items": {"properties": {"timestamp": {"type": "string", "format": "date-time", "title": "Timestamp", "description": "The time when the event occurred"}, "event_type": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Event Type", "description": "The type of event (e.g., 'Table Extraction', 'Validation Check')"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "A detailed description of the event"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details specific to the event"}}, "type": "object", "title": "ProcessingEvent"}, "type": "array", "title": "Events"}, "metrics": {"properties": {"metrics": {"type": "object", "title": "Metrics", "description": "A dictionary to store various metrics"}}, "type": "object", "title": "DataMetrics"}, "validation_results": {"anyOf": [{"properties": {"rules_passed": {"type": "integer", "title": "Rules Passed", "description": "The number of validation rules that passed", "default": 0}, "rules_failed": {"type": "integer", "title": "Rules Failed", "description": "The number of validation rules that failed", "default": 0}, "results": {"items": {"properties": {"rule_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Rule Id", "description": "The unique identifier of the validation rule"}, "passed": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Passed", "description": "Indicates whether the validation rule passed"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "The message describing the validation result"}, "severity": {"anyOf": [{"type": "string", "enum": ["Error", "Warning", "Info"], "title": "ValidationSeverity"}, {"type": "null"}], "description": "The severity level of the validation result"}, "details": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Details", "description": "Additional details about the validation result"}}, "type": "object", "title": "ValidationResult"}, "type": "array", "title": "Results", "description": "The list of individual validation results"}}, "type": "object", "title": "ValidationResults"}, {"type": "null"}]}, "additional_context": {"type": "object", "title": "Additional Context"}}, "type": "object", "required": ["phase"], "title": "ReconciliationContext"}, {"type": "null"}]}, "overall_status": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Overall Status"}, "overall_processing_time": {"type": "number", "title": "Overall Processing Time", "default": 0.0}}, "type": "object", "required": ["document_id", "document_name", "customer_id"], "title": "ReconciliationAgentInsightContext"}, {"type": "null"}]}, "additional_data": {"anyOf": [{"type": "object"}, {"type": "null"}], "title": "Additional Data", "description": "Any additional data that might be relevant"}}, "type": "object", "required": ["status", "message"], "title": "Response for Update Work Item Status", "description": "Response object containing the status, message, and additional data if any."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}}, "components": {"schemas": {"HTTPValidationError": {"properties": {"errors": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Errors"}}, "type": "object", "title": "HTTPValidationError"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}}}}